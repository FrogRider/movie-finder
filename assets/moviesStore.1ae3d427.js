import{ai as ge,aj as we,a as pe,r as $,ak as _e,G as Pe,g as be,y as Te,z as Ie,w as x,Z as he,s as W,al as Ee,am as Me}from"./entry.782ee0b5.js";var te;const Y=typeof window<"u",Se=e=>typeof e=="string",Fe=()=>{};Y&&((te=window==null?void 0:window.navigator)!=null&&te.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function w(e){return typeof e=="function"?e():Pe(e)}function ne(e,t=!1,n="Timeout"){return new Promise((r,i)=>{setTimeout(t?()=>i(n):r,e)})}function Ce(e){return e}function Ae(e,...t){return t.some(n=>n in e)}function U(e){return ge()?(we(e),!0):!1}function z(){const e=[],t=i=>{const o=e.indexOf(i);o!==-1&&e.splice(o,1)};return{on:i=>{e.push(i);const o=()=>t(i);return U(o),{off:o}},off:t,trigger:i=>{e.forEach(o=>o(i))}}}function J(e){return typeof e=="function"?pe(e):$(e)}function $e(e,t=!0){be()?Te(e):t?e():Ie(e)}function V(e,t=!1){function n(s,{flush:u="sync",deep:c=!1,timeout:h,throwOnTimeout:E}={}){let v=null;const F=[new Promise(M=>{v=x(e,S=>{s(S)!==t&&(v==null||v(),M(S))},{flush:u,deep:c,immediate:!0})})];return h!=null&&F.push(ne(h,E).then(()=>w(e)).finally(()=>v==null?void 0:v())),Promise.race(F)}function r(s,u){if(!he(s))return n(S=>S===s,u);const{flush:c="sync",deep:h=!1,timeout:E,throwOnTimeout:v}=u??{};let _=null;const M=[new Promise(S=>{_=x([e,s],([b,C])=>{t!==(b===C)&&(_==null||_(),S(b))},{flush:c,deep:h,immediate:!0})})];return E!=null&&M.push(ne(E,v).then(()=>w(e)).finally(()=>(_==null||_(),w(e)))),Promise.race(M)}function i(s){return n(u=>!!u,s)}function o(s){return r(null,s)}function a(s){return r(void 0,s)}function y(s){return n(Number.isNaN,s)}function g(s,u){return n(c=>{const h=Array.from(c);return h.includes(s)||h.includes(w(s))},u)}function m(s){return l(1,s)}function l(s=1,u){let c=-1;return n(()=>(c+=1,c>=s),u)}return Array.isArray(w(e))?{toMatch:n,toContains:g,changed:m,changedTimes:l,get not(){return V(e,!t)}}:{toMatch:n,toBe:r,toBeTruthy:i,toBeNull:o,toBeNaN:y,toBeUndefined:a,changed:m,changedTimes:l,get not(){return V(e,!t)}}}function je(e){return V(e)}function xe(e,t,n={}){const{immediate:r=!0}=n,i=$(!1);let o=null;function a(){o&&(clearTimeout(o),o=null)}function y(){i.value=!1,a()}function g(...m){a(),i.value=!0,o=setTimeout(()=>{i.value=!1,o=null,e(...m)},w(t))}return r&&(i.value=!0,Y&&g()),U(y),{isPending:_e(i),start:g,stop:y}}function ve(e){var t;const n=w(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Z=Y?window:void 0;function Xe(...e){let t,n,r,i;if(Se(e[0])||Array.isArray(e[0])?([n,r,i]=e,t=Z):[t,n,r,i]=e,!t)return Fe;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const o=[],a=()=>{o.forEach(l=>l()),o.length=0},y=(l,s,u,c)=>(l.addEventListener(s,u,c),()=>l.removeEventListener(s,u,c)),g=x(()=>[ve(t),w(i)],([l,s])=>{a(),l&&o.push(...n.flatMap(u=>r.map(c=>y(l,u,c,s))))},{immediate:!0,flush:"post"}),m=()=>{g(),a()};return U(m),m}function Ne(e,t=!1){const n=$(),r=()=>n.value=!!e();return r(),$e(r,t),n}const re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oe="__vueuse_ssr_handlers__";re[oe]=re[oe]||{};var se=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,Be=(e,t)=>{var n={};for(var r in e)Le.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&se)for(var r of se(e))t.indexOf(r)<0&&De.call(e,r)&&(n[r]=e[r]);return n};function et(e,t,n={}){const r=n,{window:i=Z}=r,o=Be(r,["window"]);let a;const y=Ne(()=>i&&"ResizeObserver"in i),g=()=>{a&&(a.disconnect(),a=void 0)},m=x(()=>ve(e),s=>{g(),y.value&&i&&s&&(a=new ResizeObserver(t),a.observe(s,o))},{immediate:!0,flush:"post"}),l=()=>{g(),m()};return U(l),{isSupported:y,stop:l}}var Qe=Object.defineProperty,Re=Object.defineProperties,Ue=Object.getOwnPropertyDescriptors,ae=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,ie=(e,t,n)=>t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))He.call(t,n)&&ie(e,n,t[n]);if(ae)for(var n of ae(t))Ge.call(t,n)&&ie(e,n,t[n]);return e},L=(e,t)=>Re(e,Ue(t));const ke={json:"application/json",text:"text/plain"};function ue(e){return e&&Ae(e,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch")}function K(e){return typeof Headers<"u"&&e instanceof Headers?Object.fromEntries([...e.entries()]):e}function ye(e,...t){var n;const r=typeof AbortController=="function";let i={},o={immediate:!0,refetch:!1,timeout:0};const a={method:"GET",type:"text",payload:void 0};t.length>0&&(ue(t[0])?o=p(p({},o),t[0]):i=t[0]),t.length>1&&ue(t[1])&&(o=p(p({},o),t[1]));const{fetch:y=(n=Z)==null?void 0:n.fetch,initialData:g,timeout:m}=o,l=z(),s=z(),u=z(),c=$(!1),h=$(!1),E=$(!1),v=$(null),_=W(null),F=W(null),M=W(g),S=pe(()=>r&&h.value);let b,C;const H=()=>{r&&b&&(b.abort(),b=void 0)},G=f=>{h.value=f,c.value=!f};m&&(C=xe(H,m,{immediate:!1}));const D=async(f=!1)=>{var P;G(!0),F.value=null,v.value=null,E.value=!1,r&&(H(),b=new AbortController,b.signal.onabort=()=>E.value=!0,i=L(p({},i),{signal:b.signal}));const O={method:a.method,headers:{}};if(a.payload){const Q=K(O.headers);a.payloadType&&(Q["Content-Type"]=(P=ke[a.payloadType])!=null?P:a.payloadType);const R=w(a.payload);O.body=a.payloadType==="json"?JSON.stringify(R):R}let j=!1;const T={url:w(e),options:p(p({},O),i),cancel:()=>{j=!0}};if(o.beforeFetch&&Object.assign(T,await o.beforeFetch(T)),j||!y)return G(!1),Promise.resolve(null);let I=null;return C&&C.start(),new Promise((Q,R)=>{var X;y(T.url,L(p(p({},O),T.options),{headers:p(p({},K(O.headers)),K((X=T.options)==null?void 0:X.headers))})).then(async d=>{if(_.value=d,v.value=d.status,I=await d[a.type](),o.afterFetch&&v.value>=200&&v.value<300&&({data:I}=await o.afterFetch({data:I,response:d})),M.value=I,!d.ok)throw new Error(d.statusText);return l.trigger(d),Q(d)}).catch(async d=>{let ee=d.message||d.name;return o.onFetchError&&({data:I,error:ee}=await o.onFetchError({data:I,error:d,response:_.value})),M.value=I,F.value=ee,s.trigger(d),f?R(d):Q(null)}).finally(()=>{G(!1),C&&C.stop(),u.trigger(null)})})},q=J(o.refetch);x([q,J(e)],([f])=>f&&D(),{deep:!0});const B={isFinished:c,statusCode:v,response:_,error:F,data:M,isFetching:h,canAbort:S,aborted:E,abort:H,execute:D,onFetchResponse:l.on,onFetchError:s.on,onFetchFinally:u.on,get:A("GET"),put:A("PUT"),post:A("POST"),delete:A("DELETE"),patch:A("PATCH"),head:A("HEAD"),options:A("OPTIONS"),json:N("json"),text:N("text"),blob:N("blob"),arrayBuffer:N("arrayBuffer"),formData:N("formData")};function A(f){return(P,O)=>{if(!h.value){a.method=f,a.payload=P,a.payloadType=O,he(a.payload)&&x([q,J(a.payload)],([T])=>T&&D(),{deep:!0});const j=w(a.payload);return!O&&j&&Object.getPrototypeOf(j)===Object.prototype&&!(j instanceof FormData)&&(a.payloadType="json"),L(p({},B),{then(T,I){return k().then(T,I)}})}}}function k(){return new Promise((f,P)=>{je(c).toBe(!0).then(()=>f(B)).catch(O=>P(O))})}function N(f){return()=>{if(!h.value)return a.type=f,L(p({},B),{then(P,O){return k().then(P,O)}})}}return o.immediate&&setTimeout(D,0),L(p({},B),{then(f,P){return k().then(f,P)}})}var le;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(le||(le={}));var We=Object.defineProperty,ce=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,fe=(e,t,n)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ke=(e,t)=>{for(var n in t||(t={}))ze.call(t,n)&&fe(e,n,t[n]);if(ce)for(var n of ce(t))Je.call(t,n)&&fe(e,n,t[n]);return e};const Ve={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Ke({linear:Ce},Ve);const me="https://www.omdbapi.com/",Oe="c91a6fb3",tt=4,nt=10,de=async e=>{const t=Ze(),{data:n}=await ye(`${me}/?apikey=${Oe}&s=${e}&page=${t.currentPage+1}`);return n.value},Ye=async e=>{const{data:t}=await ye(`${me}/?apikey=${Oe}&i=${e}`);return t.value},Ze=Ee("MoviesStore",{state:()=>({isLoading:!1,movies:[],searchTitle:"",currentPage:0,currentIndex:0,totalResults:null,curentMovieId:null,curentMovie:null}),getters:{},actions:{showLoader(){this.isLoading=!0},hideLoader(){setTimeout(()=>{this.isLoading=!1},1e3)},setInitialMovies(e){this.movies=e},setTotalMoviesAmount(e){this.totalResults=Number(e)},addMovies(e){this.showLoader(),this.movies=this.movies.concat(e),this.hideLoader()},eraseMovies(){this.movies=[]},setSearchTitle(e){this.searchTitle=e},setCurrentPage(e){this.currentPage=e},setCurrentIndex(e){this.currentIndex=e},getInitialMovies(){this.showLoader(),de(this.searchTitle).then(e=>{const t=JSON.parse(e),n=!(t!=null&&t.Error);if(this.setTotalMoviesAmount(t.totalResults),!n){this.eraseMovies(),this.setCurrentPage(0);return}this.setInitialMovies(t.Search),this.setCurrentPage(0)}),this.hideLoader()},getNextPage(){this.showLoader(),this.currentPage+=1,de(this.searchTitle).then(e=>{const t=JSON.parse(e);t!=null&&t.Error||this.addMovies(t.Search)}),this.hideLoader()},clearState(){this.movies=[],this.searchTitle="",this.totalResults=0,this.curentMovie=null,this.curentMovieId=null,this.currentIndex=0},getMovie(){this.showLoader(),Ye(this.curentMovieId).then(e=>{const t=JSON.parse(e);if(!!(t!=null&&t.Error)){Me({statusCode:404,statusMessage:`movie with id ${this.curentMovieId} not found`}),this.curentMovieId=null;return}this.curentMovie=t,this.hideLoader()})},setCurentMovieId(e){this.curentMovieId=e},clearCurrentMovie(){this.curentMovie=null}}});export{nt as I,tt as M,et as a,Ze as b,Y as i,Xe as u};
